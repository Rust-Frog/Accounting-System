<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Accounting System - Transaction Management">
    <title>TRANSACTIONS | Accounting System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="stylesheet" href="/assets/css/dashboard.css">
    <link rel="stylesheet" href="/assets/css/transactions.css">
</head>

<body>
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="24" height="24"
                        fill="currentColor">
                        <path d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 4Z"></path>
                    </svg>
                    <span class="logo-text">ACCT<span class="logo-accent">SYS</span></span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <span class="nav-section-title">Main</span>
                    <a href="/dashboard.html" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM6.5 6.5v8h7.75a.25.25 0 0 0 .25-.25V6.5Zm8-1.5V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25V5Z">
                            </path>
                        </svg>
                        <span class="nav-label">Dashboard</span>
                    </a>
                    <a href="/transactions.html" class="nav-item active">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M11.93 8.5a4.002 4.002 0 0 1-7.86 0H.75a.75.75 0 0 1 0-1.5h3.32a4.002 4.002 0 0 1 7.86 0h3.32a.75.75 0 0 1 0 1.5Zm-1.43-.75a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z">
                            </path>
                        </svg>
                        <span class="nav-label">Transactions</span>
                    </a>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM1.5 6.5v7.75c0 .138.112.25.25.25H5v-8Zm5 8h7.75a.25.25 0 0 0 .25-.25V6.5h-8Zm8-9.5V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25V5Z">
                            </path>
                        </svg>
                        <span class="nav-label">Journal</span>
                    </a>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25ZM3.5 6.25a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5Z">
                            </path>
                        </svg>
                        <span class="nav-label">Ledger</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Reports</span>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M10.5 5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm.061 3.073a4 4 0 1 0-5.123 0 6.004 6.004 0 0 0-3.431 5.142.75.75 0 0 0 1.498.07 4.5 4.5 0 0 1 8.99 0 .75.75 0 1 0 1.498-.07 6.005 6.005 0 0 0-3.432-5.142Z">
                            </path>
                        </svg>
                        <span class="nav-label">Trial Balance</span>
                    </a>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M1.5 1.75V13.5h13.75a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75V1.75a.75.75 0 0 1 1.5 0Zm14.28 2.53-5.25 5.25a.75.75 0 0 1-1.06 0L7 7.06 4.28 9.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.25-3.25a.75.75 0 0 1 1.06 0L10 7.94l4.72-4.72a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z">
                            </path>
                        </svg>
                        <span class="nav-label">Income Statement</span>
                    </a>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM1.5 1.75v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25ZM3 4.25a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75Zm.75 3.25a.75.75 0 0 0 0 1.5h5.5a.75.75 0 0 0 0-1.5Zm0 4a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5Z">
                            </path>
                        </svg>
                        <span class="nav-label">Balance Sheet</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">Administration</span>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z">
                            </path>
                        </svg>
                        <span class="nav-label">Users</span>
                    </a>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v4c0 .372-.116.717-.314 1 .198.283.314.628.314 1v4a1.75 1.75 0 0 1-1.75 1.75H1.75A1.75 1.75 0 0 1 0 12.75v-4c0-.372.116-.717.314-1a1.739 1.739 0 0 1-.314-1v-4C0 1.784.784 1 1.75 1ZM1.5 2.75v4c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Zm.25 5.75a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25ZM7 4.75A.75.75 0 0 1 7.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5A.75.75 0 0 1 7 4.75ZM7.75 10h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM3 4.75A.75.75 0 0 1 3.75 4h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 4.75ZM3.75 10h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z">
                            </path>
                        </svg>
                        <span class="nav-label">Companies</span>
                    </a>
                    <a href="#" class="nav-item">
                        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16"
                            height="16" fill="currentColor">
                            <path
                                d="M1.643 3.143.427 1.927A.25.25 0 0 1 .604 1.5H2.75c.138 0 .25.112.25.25v2.146a.25.25 0 0 1-.427.177L1.75 3.25 1.643 3.143Z">
                            </path>
                            <path
                                d="M8 1a.75.75 0 0 1 .75.75v6.5a.75.75 0 0 1-1.5 0v-6.5A.75.75 0 0 1 8 1ZM1.5 8a6.5 6.5 0 1 1 13 0 6.5 6.5 0 0 1-13 0ZM8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0Z">
                            </path>
                        </svg>
                        <span class="nav-label">Audit Log</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">A</div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Admin</span>
                        <span class="user-role">Administrator</span>
                    </div>
                </div>
                <button class="btn-logout" id="btnLogout" title="Logout">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"
                        fill="currentColor">
                        <path
                            d="M2 2.75C2 1.784 2.784 1 3.75 1h2.5a.75.75 0 0 1 0 1.5h-2.5a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h2.5a.75.75 0 0 1 0 1.5h-2.5A1.75 1.75 0 0 1 2 13.25Zm10.44 4.5-1.97-1.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l3.25 3.25a.75.75 0 0 1 0 1.06l-3.25 3.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.97-1.97H6.75a.75.75 0 0 1 0-1.5Z">
                        </path>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="page-title">
                    <h1>Transactions</h1>
                    <span class="badge badge-info" id="transactionCount">Loading...</span>
                </div>
                <div class="top-bar-actions">
                    <button class="btn btn-primary" id="btnNewTransaction">
                        + New Transaction
                    </button>
                </div>
            </header>

            <!-- Transaction Content -->
            <div class="content-area">
                <!-- Filter Bar -->
                <div class="filter-bar">
                    <div class="filter-group">
                        <label>Company:</label>
                        <select id="filterCompany" class="form-select">
                            <option value="">Loading companies...</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Status:</label>
                        <select id="filterStatus" class="form-select">
                            <option value="">All</option>
                            <option value="draft">Draft</option>
                            <option value="pending">Pending Approval</option>
                            <option value="approved">Approved</option>
                            <option value="posted">Posted</option>
                            <option value="voided">Voided</option>
                        </select>
                    </div>
                    <div class="filter-group" style="margin-left: auto;">
                        <button class="btn btn-secondary" id="btnRefresh">Refresh</button>
                    </div>
                </div>

                <!-- Transactions Table -->
                <div class="panel">
                    <div class="table-container">
                        <table class="data-table" id="transactionsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Date</th>
                                    <th>Description</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsBody">
                                <tr class="loading-row">
                                    <td colspan="6">
                                        <div class="loading-spinner">Loading transactions...</div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="pagination">
                        <button class="btn btn-sm" id="btnPrevPage" disabled>← Previous</button>
                        <span class="page-info" id="pageInfo">Page 1</span>
                        <button class="btn btn-sm" id="btnNextPage">Next →</button>
                    </div>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <svg class="empty-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="48"
                        height="48" fill="currentColor">
                        <path
                            d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM6.5 6.5v8h7.75a.25.25 0 0 0 .25-.25V6.5Zm8-1.5V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25V5Z">
                        </path>
                    </svg>
                    <h3>No Transactions Found</h3>
                    <p>Create your first transaction to get started.</p>
                    <button class="btn btn-primary" id="btnCreateFirst">Create Transaction</button>
                </div>
            </div>

            <!-- Footer -->
            <footer class="main-footer">
                <span class="footer-text">ALL ACTIVITIES ARE MONITORED AND LOGGED</span>
            </footer>
        </main>
    </div>

    <!-- New Transaction Modal -->
    <div class="modal" id="transactionModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">New Transaction</h2>
                <button class="modal-close" id="btnCloseModal">&times;</button>
            </div>
            <form id="transactionForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="txnDate">Transaction Date</label>
                        <input type="date" id="txnDate" name="date" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="txnDescription">Description</label>
                        <input type="text" id="txnDescription" name="description" class="form-input"
                            placeholder="Enter transaction description" required>
                    </div>
                    <div class="form-group">
                        <label for="txnReference">Reference Number</label>
                        <input type="text" id="txnReference" name="reference" class="form-input"
                            placeholder="Optional reference">
                    </div>

                    <!-- Transaction Lines -->
                    <div class="form-section">
                        <div class="section-header">
                            <h3>Transaction Lines</h3>
                            <button type="button" class="btn btn-sm btn-secondary" id="btnAddLine">+ Add Line</button>
                        </div>
                        <div class="lines-container" id="linesContainer">
                            <!-- Lines will be added dynamically -->
                        </div>
                        <div class="balance-check" id="balanceCheck">
                            <span>Total Debits: <strong id="totalDebits">0.00</strong></span>
                            <span>Total Credits: <strong id="totalCredits">0.00</strong></span>
                            <span class="balance-status" id="balanceStatus">⚠️ Unbalanced</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="btnCancelTransaction">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="btnSubmitTransaction" disabled>
                        Create Transaction
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Transaction Detail Modal -->
    <div class="modal" id="detailModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Transaction Details</h2>
                <button class="modal-close" id="btnCloseDetail">&times;</button>
            </div>
            <div class="modal-body" id="detailContent">
                <!-- Details loaded dynamically -->
            </div>
            <div class="modal-footer" id="detailActions">
                <!-- Actions based on status -->
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="confirm-modal" id="confirmModal">
        <div class="modal-backdrop"></div>
        <div class="confirm-content">
            <h3 class="confirm-title" id="confirmTitle">Confirm Action</h3>

            <!-- Transaction Summary -->
            <div class="confirm-summary" id="confirmSummary">
                <div class="summary-row">
                    <span class="summary-label">Amount</span>
                    <span class="summary-value" id="confirmAmount">$0.00</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Description</span>
                    <span class="summary-value" id="confirmDescription">-</span>
                </div>
            </div>

            <!-- Impact Preview -->
            <div class="impact-preview" id="impactPreview">
                <div class="impact-header">Impact Preview</div>
                <div class="impact-accounts" id="impactAccounts">
                    <!-- Accounts will be populated dynamically -->
                </div>
                <div class="impact-result" id="impactResult">
                    <!-- Result message -->
                </div>
            </div>

            <div class="confirm-input" id="confirmInputWrapper" style="display: none;">
                <label for="confirmReason">Reason / Notes</label>
                <textarea id="confirmReason" class="form-control" rows="2" placeholder="Enter reason..."></textarea>
            </div>
            <div class="confirm-actions">
                <button class="btn btn-secondary" id="btnConfirmCancel">Cancel</button>
                <button class="btn" id="btnConfirmAction">Confirm</button>
            </div>
        </div>
    </div>

    <script src="/assets/js/api.js"></script>
    <script src="/assets/js/transactions.js"></script>
</body>

</html>